{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "ota_multi_pack_bundle_v1",
  "title": "OTA Multi-Pack Bundle Manifest v1",
  "description": "Device-loader contract for multi-pack wrapper directories. Each pack entry provides relative paths to sub-bundles.",
  "type": "object",
  "additionalProperties": false,
  "required": ["schema_id", "schema_version", "set_id", "packs"],
  "properties": {
    "schema_id": {
      "const": "ota_multi_pack_bundle"
    },
    "schema_version": {
      "const": "v1"
    },
    "set_id": {
      "type": "string",
      "minLength": 1,
      "description": "Pack set ID that produced this bundle"
    },
    "generated_at_unix": {
      "type": "integer",
      "description": "Unix timestamp when bundle was generated"
    },
    "packs": {
      "type": "array",
      "minItems": 1,
      "description": "Sub-bundles contained in this wrapper",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["dance_pack_id", "sub_bundle_dir", "manifest_path"],
        "properties": {
          "dance_pack_id": {
            "type": "string",
            "minLength": 1,
            "description": "Dance pack ID for this sub-bundle"
          },
          "sub_bundle_dir": {
            "type": "string",
            "minLength": 1,
            "description": "Relative path to sub-bundle directory"
          },
          "manifest_path": {
            "type": "string",
            "minLength": 1,
            "description": "Relative path to sub-bundle manifest.json"
          }
        }
      }
    }
  }
}
