{
  "id": "S2_safe_window_enforcement",
  "description": "Never intervene while playing or before pause threshold",
  "startMs": 2100000,
  "rngSequence": [0.12, 0.34, 0.56, 0.78],
  "steps": [
    {
      "label": "unsafe_playing",
      "in": {
        "at_ms": 2100000,
        "mode": "PRACTICE",
        "backoff": "L1",
        "signals": {
          "timeSinceLastNoteOnMs": 200,
          "phraseBoundaryDetected": false,
          "timeSincePhraseBoundaryMs": 0,
          "ignoreStreak": 0,
          "silencePreference": 0.2,
          "userExplicitQuiet": false
        }
      },
      "expect": {
        "shouldInitiate": false,
        "reasonPrefix": "insufficient_pause"
      }
    },
    {
      "label": "safe_paused",
      "in": {
        "at_ms": 2104000,
        "mode": "PRACTICE",
        "backoff": "L1",
        "signals": {
          "timeSinceLastNoteOnMs": 1200,
          "phraseBoundaryDetected": true,
          "timeSincePhraseBoundaryMs": 1000,
          "ignoreStreak": 0,
          "silencePreference": 0.2,
          "userExplicitQuiet": false
        }
      },
      "expect": {
        "shouldInitiate": true
      }
    },
    {
      "label": "unsafe_short_pause",
      "in": {
        "at_ms": 2108000,
        "mode": "PRACTICE",
        "backoff": "L1",
        "signals": {
          "timeSinceLastNoteOnMs": 300,
          "phraseBoundaryDetected": false,
          "timeSincePhraseBoundaryMs": 0,
          "ignoreStreak": 0,
          "silencePreference": 0.2,
          "userExplicitQuiet": false
        }
      },
      "expect": {
        "shouldInitiate": false,
        "reasonPrefix": "insufficient_pause"
      }
    },
    {
      "label": "safe_phrase_end",
      "in": {
        "at_ms": 2134000,
        "mode": "PRACTICE",
        "backoff": "L1",
        "signals": {
          "timeSinceLastNoteOnMs": 1300,
          "phraseBoundaryDetected": true,
          "timeSincePhraseBoundaryMs": 1100,
          "ignoreStreak": 0,
          "silencePreference": 0.2,
          "userExplicitQuiet": false
        }
      },
      "expect": {
        "shouldInitiate": true
      }
    }
  ],
  "aggregate": {
    "neverInsideUnsafeWindow": true
  }
}
